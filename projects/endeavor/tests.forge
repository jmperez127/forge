# Endeavor Tests

# New project defaults to forge state
test Project.create {
  when create Project
  expect Project.state = forge
}

# New project defaults to not archived
test Project.create {
  when create Project
  expect Project.archived = false
}

# Cannot update archived project
test Project.update {
  given archived = true
  when update Project
  expect reject PROJECT_ARCHIVED
}

# Cannot transition to same state
test StateTransition.create {
  given from_state = forge
  given to_state = forge
  when create StateTransition
  expect reject SAME_STATE_TRANSITION
}

# Valid transition from forge to embodiment
test StateTransition.create {
  given from_state = forge
  given to_state = embodiment
  when create StateTransition
  expect StateTransition.from_state = forge
}

# Weekly review defaults to moderate energy
test WeeklyReview.create {
  when create WeeklyReview
  expect WeeklyReview.energy_level = moderate
}
